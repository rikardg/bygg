{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "type": "object",
  "title": "Schema for the configuration files for Bygg",
  "properties": {
    "actions": {
      "type": "object",
      "additionalProperties": {
        "anyOf": [
          {
            "allOf": [
              {
                "$ref": "#/$defs/ActionItem"
              }
            ]
          },
          {
            "type": "string"
          }
        ]
      },
      "title": "ActionItem",
      "description": "This is a representation of the Action class used for deserialising from YAML.\nThe name of the action is the key in the dictionary in the config file.\n\nParameters\n----------\ndescription : str, optional\n    A description of the action. Used in e.g. action listings. Default is None.\nmessage : str, optional\n    A message to print when the action is executed. Default is None.\ninputs : list of str, optional\n    A list of files that are used as input to the action. Default is None.\noutputs : list of str, optional\n    A list of files that are generated by the action. Default is None.\ndependencies : list of str, optional\n    A list of actions that must be executed before this action. Default is None.\nis_entrypoint : bool, optional\n    Whether this action is an entrypoint. Entrypoints are actions that can be\n    executed directly from the command line. If not set, this is treated as true by\n    default in Byggfile.yml and false when used from Python. Default is None.\nenvironment : str, optional\n    The environment for the action. Default is \"default\".\nshell : str, optional\n    The shell command to execute when the action is run. Default is None."
    },
    "settings": {
      "allOf": [
        {
          "$ref": "#/$defs/Settings"
        }
      ],
      "title": "Settings",
      "description": "The global settings object for Bygg."
    },
    "environments": {
      "type": "object",
      "additionalProperties": {
        "allOf": [
          {
            "$ref": "#/$defs/Environment"
          }
        ]
      },
      "title": "Environment",
      "description": "A class used to represent a virtual environment that actions can be run in.\n\nAttributes\n----------\nbyggfile : str\n    The Python Byggfile that uses this environment.\ninputs : list[str]\n    A list of files that are used as input to the environment. Typically pip\n    requirements files, but can be any files.\nvenv_directory : str\n    The directory where the virtual environment is located. Will be recreated by\n    Bygg if any of the inputs are modified.\nshell : str\n    The shell command for creating the environment.\nname : str, optional\n    A human-friendly name for the environment. Used in e.g. help messages, by default None"
    }
  },
  "$defs": {
    "ActionItem": {
      "type": "object",
      "title": "ActionItem",
      "properties": {
        "description": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "message": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "inputs": {
          "anyOf": [
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "outputs": {
          "anyOf": [
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "dependencies": {
          "anyOf": [
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "is_entrypoint": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "environment": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": "default"
        },
        "shell": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        }
      },
      "additionalProperties": false,
      "description": "This is a representation of the Action class used for deserialising from YAML.\nThe name of the action is the key in the dictionary in the config file.\n\nParameters\n----------\ndescription : str, optional\n    A description of the action. Used in e.g. action listings. Default is None.\nmessage : str, optional\n    A message to print when the action is executed. Default is None.\ninputs : list of str, optional\n    A list of files that are used as input to the action. Default is None.\noutputs : list of str, optional\n    A list of files that are generated by the action. Default is None.\ndependencies : list of str, optional\n    A list of actions that must be executed before this action. Default is None.\nis_entrypoint : bool, optional\n    Whether this action is an entrypoint. Entrypoints are actions that can be\n    executed directly from the command line. If not set, this is treated as true by\n    default in Byggfile.yml and false when used from Python. Default is None.\nenvironment : str, optional\n    The environment for the action. Default is \"default\".\nshell : str, optional\n    The shell command to execute when the action is run. Default is None."
    },
    "Settings": {
      "type": "object",
      "title": "Settings",
      "properties": {
        "default_action": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        }
      },
      "additionalProperties": false,
      "description": "The global settings object for Bygg."
    },
    "Environment": {
      "type": "object",
      "title": "Environment",
      "properties": {
        "byggfile": {
          "type": "string"
        },
        "inputs": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "venv_directory": {
          "type": "string"
        },
        "shell": {
          "type": "string"
        },
        "name": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        }
      },
      "required": [
        "byggfile",
        "inputs",
        "venv_directory",
        "shell"
      ],
      "additionalProperties": false,
      "description": "A class used to represent a virtual environment that actions can be run in.\n\nAttributes\n----------\nbyggfile : str\n    The Python Byggfile that uses this environment.\ninputs : list[str]\n    A list of files that are used as input to the environment. Typically pip\n    requirements files, but can be any files.\nvenv_directory : str\n    The directory where the virtual environment is located. Will be recreated by\n    Bygg if any of the inputs are modified.\nshell : str\n    The shell command for creating the environment.\nname : str, optional\n    A human-friendly name for the environment. Used in e.g. help messages, by default None"
    }
  },
  "additionalProperties": false
}
